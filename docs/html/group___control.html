<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.14.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>LMA: Control</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(function() { init_search(); });
</script>
<script type="text/javascript">
window.MathJax = {
  options: {
    ignoreHtmlClass: 'tex2jax_ignore',
    processHtmlClass: 'tex2jax_process'
  }
};
</script>
<script type="text/javascript" id="MathJax-script" async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">LMA
   </div>
   <div id="projectbrief">Lightweight Metrology for AC</div>
  </td>
    <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <span id="MSearchSelect" class="search-icon" onmouseover="return searchBox.OnSearchSelectShow()" onmouseout="return searchBox.OnSearchSelectHide()"><span class="search-icon-dropdown"></span></span>
          <input type="text" id="MSearchField" value="" placeholder="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><div id="MSearchCloseImg" class="close-icon"></div></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.14.0 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search/",'.html');
</script>
<script type="text/javascript">
$(function() { codefold.init(); });
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(function(){initNavTree('group___control.html','',''); });
</script>
<div id="container">
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">Control <div class="ingroups"><a class="el" href="group___a_p_i.html">API</a></div></div></div>
</div><!--header-->
<div class="contents">
<a name="details" id="details"></a><h2 id="header-details" class="groupheader">Description</h2>
<p>LMA Control API </p>
<p>The LMA Control API is used to control the functionality of LMA, that is to say it defines LMA's behaviour. For example starting and stopping operation or performing a calibration. </p>
<div class="dynheader">
Collaboration diagram for Control:</div>
<div class="dyncontent">
<div class="center"><img src="group___control.png" border="0" usemap="#agroup______control" loading="lazy" alt=""/></div>
<map name="agroup______control" id="agroup______control">
<area shape="rect" href="group___a_p_i.html" title="LMA API" alt="" coords="5,5,49,32"/>
<area shape="rect" title="LMA Control API" alt="" coords="97,5,160,32"/>
</map>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-func-members" class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga56c88b00e4f3d1abab426811b54cd85a" id="r_ga56c88b00e4f3d1abab426811b54cd85a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga56c88b00e4f3d1abab426811b54cd85a">LMA_Init</a> (<a class="el" href="struct_l_m_a___config.html">LMA_Config</a> *const p_config_arg)</td></tr>
<tr class="memdesc:ga56c88b00e4f3d1abab426811b54cd85a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initalises the Light-Weight Metrology for AC Framework according to the config.  <br /></td></tr>
<tr class="memitem:gaf31bec4a4c8ff8b3e466d7b4fa64408d" id="r_gaf31bec4a4c8ff8b3e466d7b4fa64408d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gaf31bec4a4c8ff8b3e466d7b4fa64408d">LMA_Deinit</a> (void)</td></tr>
<tr class="memdesc:gaf31bec4a4c8ff8b3e466d7b4fa64408d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Deinitialises LMA.  <br /></td></tr>
<tr class="memitem:ga6c54cbc1a418aa6b14d3ac9b89820b2f" id="r_ga6c54cbc1a418aa6b14d3ac9b89820b2f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga6c54cbc1a418aa6b14d3ac9b89820b2f">LMA_PhaseRegister</a> (<a class="el" href="struct_l_m_a___phase.html">LMA_Phase</a> *const p_phase)</td></tr>
<tr class="memdesc:ga6c54cbc1a418aa6b14d3ac9b89820b2f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Registers a phase to the library.  <br /></td></tr>
<tr class="memitem:ga7f279a0e6e30f511c1ae98b7a7491ab5" id="r_ga7f279a0e6e30f511c1ae98b7a7491ab5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga7f279a0e6e30f511c1ae98b7a7491ab5">LMA_NeutralRegister</a> (<a class="el" href="struct_l_m_a___phase.html">LMA_Phase</a> *const p_phase, <a class="el" href="struct_l_m_a___neutral.html">LMA_Neutral</a> *const p_neutral)</td></tr>
<tr class="memdesc:ga7f279a0e6e30f511c1ae98b7a7491ab5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Registers the systems neutral line to the library (if used)  <br /></td></tr>
<tr class="memitem:ga1edc37f06d0b20a36f8a71ae6cddb9d8" id="r_ga1edc37f06d0b20a36f8a71ae6cddb9d8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga1edc37f06d0b20a36f8a71ae6cddb9d8">LMA_ComputationHookRegister</a> (<a class="el" href="struct_l_m_a___phase.html">LMA_Phase</a> *const p_phase, float(*comp_hook)(float *i, float *v, float *f))</td></tr>
<tr class="memdesc:ga1edc37f06d0b20a36f8a71ae6cddb9d8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Registers a hook to be called during parameter computations.  <br /></td></tr>
<tr class="memitem:ga89d1810189c1c5dddff9206e77024b79" id="r_ga89d1810189c1c5dddff9206e77024b79"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga89d1810189c1c5dddff9206e77024b79">LMA_GlobalLoadCalibration</a> (const <a class="el" href="struct_l_m_a___global_calibration.html">LMA_GlobalCalibration</a> *const p_calib)</td></tr>
<tr class="memdesc:ga89d1810189c1c5dddff9206e77024b79"><td class="mdescLeft">&#160;</td><td class="mdescRight">Loads calibration data to a system (and config).  <br /></td></tr>
<tr class="memitem:gad53d8441d05b0ee5b7930963171bc199" id="r_gad53d8441d05b0ee5b7930963171bc199"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gad53d8441d05b0ee5b7930963171bc199">LMA_PhaseLoadCalibration</a> (<a class="el" href="struct_l_m_a___phase.html">LMA_Phase</a> *const p_phase, const <a class="el" href="struct_l_m_a___phase_calibration.html">LMA_PhaseCalibration</a> *const p_calib)</td></tr>
<tr class="memdesc:gad53d8441d05b0ee5b7930963171bc199"><td class="mdescLeft">&#160;</td><td class="mdescRight">Loads calibration data to a phase.  <br /></td></tr>
<tr class="memitem:ga58095d16c30d20417f8850f9ffc19b9f" id="r_ga58095d16c30d20417f8850f9ffc19b9f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga58095d16c30d20417f8850f9ffc19b9f">LMA_NeutralLoadCalibration</a> (<a class="el" href="struct_l_m_a___neutral.html">LMA_Neutral</a> *const p_neutral, const <a class="el" href="struct_l_m_a___neutral_calibration.html">LMA_NeutralCalibration</a> *const p_calib)</td></tr>
<tr class="memdesc:ga58095d16c30d20417f8850f9ffc19b9f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Loads calibration data to a neutral.  <br /></td></tr>
<tr class="memitem:ga04171703dd9ebc3622dbddeead01e116" id="r_ga04171703dd9ebc3622dbddeead01e116"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga04171703dd9ebc3622dbddeead01e116">LMA_Start</a> (void)</td></tr>
<tr class="memdesc:ga04171703dd9ebc3622dbddeead01e116"><td class="mdescLeft">&#160;</td><td class="mdescRight">Starts LMA Operation.  <br /></td></tr>
<tr class="memitem:ga57e7b7b8d130377ab64560a44237c772" id="r_ga57e7b7b8d130377ab64560a44237c772"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga57e7b7b8d130377ab64560a44237c772">LMA_Stop</a> (void)</td></tr>
<tr class="memdesc:ga57e7b7b8d130377ab64560a44237c772"><td class="mdescLeft">&#160;</td><td class="mdescRight">Stops LMA Operation.  <br /></td></tr>
<tr class="memitem:ga1cccfc7d6139fc9ae382c71b9e4da524" id="r_ga1cccfc7d6139fc9ae382c71b9e4da524"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga1cccfc7d6139fc9ae382c71b9e4da524">LMA_PhaseCalibrate</a> (<a class="el" href="struct_l_m_a___phase_calib_args.html">LMA_PhaseCalibArgs</a> *const calib_args)</td></tr>
<tr class="memdesc:ga1cccfc7d6139fc9ae382c71b9e4da524"><td class="mdescLeft">&#160;</td><td class="mdescRight">Performs a calibration command according to the flags passed.  <br /></td></tr>
<tr class="memitem:gaf99c92bd7cb9c347b51c1f70650ed14e" id="r_gaf99c92bd7cb9c347b51c1f70650ed14e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gaf99c92bd7cb9c347b51c1f70650ed14e">LMA_GlobalCalibrate</a> (<a class="el" href="struct_l_m_a___global_calib_args.html">LMA_GlobalCalibArgs</a> *const calib_args)</td></tr>
<tr class="memdesc:gaf99c92bd7cb9c347b51c1f70650ed14e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Performs a calibration command according to the flags passed.  <br /></td></tr>
<tr class="memitem:ga1bb014412cbe48319a337618b9ef0137" id="r_ga1bb014412cbe48319a337618b9ef0137"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga1bb014412cbe48319a337618b9ef0137">LMA_EnergySet</a> (<a class="el" href="struct_l_m_a___system_energy.html">LMA_SystemEnergy</a> *const p_energy)</td></tr>
<tr class="memdesc:ga1bb014412cbe48319a337618b9ef0137"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets the energy data.  <br /></td></tr>
<tr class="memitem:gab00649ab7c0d377cc575ae136fbbadf2" id="r_gab00649ab7c0d377cc575ae136fbbadf2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gab00649ab7c0d377cc575ae136fbbadf2">LMA_EnergyGet</a> (<a class="el" href="struct_l_m_a___system_energy.html">LMA_SystemEnergy</a> *const p_energy)</td></tr>
<tr class="memdesc:gab00649ab7c0d377cc575ae136fbbadf2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets the energy data.  <br /></td></tr>
<tr class="memitem:gac475385e97655bc99bb4fc8306aef078" id="r_gac475385e97655bc99bb4fc8306aef078"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group___types.html#gab40ee89230639dd5a514744d23fee390">LMA_Status</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gac475385e97655bc99bb4fc8306aef078">LMA_StatusGet</a> (const <a class="el" href="struct_l_m_a___phase.html">LMA_Phase</a> *const p_phase)</td></tr>
<tr class="memdesc:gac475385e97655bc99bb4fc8306aef078"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets copy of the current phase status using critical secrtions.  <br /></td></tr>
</table>
<a name="doc-func-members" id="doc-func-members"></a><h2 id="header-doc-func-members" class="groupheader">Function Documentation</h2>
<a id="ga56c88b00e4f3d1abab426811b54cd85a" name="ga56c88b00e4f3d1abab426811b54cd85a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga56c88b00e4f3d1abab426811b54cd85a">&#9670;&#160;</a></span>LMA_Init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void LMA_Init </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_l_m_a___config.html">LMA_Config</a> *const</td>          <td class="paramname"><span class="paramname"><em>p_config_arg</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initalises the Light-Weight Metrology for AC Framework according to the config. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">p_config_arg</td><td>- pointer to the configuration structure. </td></tr>
  </table>
  </dd>
</dl>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group___control_ga56c88b00e4f3d1abab426811b54cd85a_cgraph.png" border="0" usemap="#agroup___control_ga56c88b00e4f3d1abab426811b54cd85a_cgraph" loading="lazy" alt=""/></div>
<map name="agroup___control_ga56c88b00e4f3d1abab426811b54cd85a_cgraph" id="agroup___control_ga56c88b00e4f3d1abab426811b54cd85a_cgraph">
<area shape="rect" title="Initalises the Light&#45;Weight Metrology for AC Framework according to the config." alt="" coords="5,132,79,159"/>
<area shape="rect" href="group___porting.html#gafc7eb113e0601ffa3a5c43523f4fce09" title="Initialises ADC." alt="" coords="150,5,259,32"/>
<area shape="poly" title=" " alt="" coords="49,130,79,87,100,63,125,42,134,36,137,41,128,46,104,67,83,90,53,133"/>
<area shape="rect" href="group___porting.html#ga7a2aab7f7b061b109a75fc594c6ace9a" title="Callback to turn off active impulse LED." alt="" coords="134,56,274,83"/>
<area shape="poly" title=" " alt="" coords="62,129,125,92,140,86,142,91,128,97,65,134"/>
<area shape="rect" href="group___porting.html#gaebefc389f6e54cc4a0c7d83361e9d1da" title="Callback to turn off apparent impulse LED." alt="" coords="127,107,282,133"/>
<area shape="poly" title=" " alt="" coords="79,137,111,132,112,137,80,142"/>
<area shape="rect" href="group___porting.html#gaf75b8718f2165ca67649e8cc4562bcd5" title="Callback to turn off reactive impulse LED." alt="" coords="127,157,282,184"/>
<area shape="poly" title=" " alt="" coords="80,148,112,153,111,159,79,154"/>
<area shape="rect" href="group___porting.html#ga32ee17e5c7d93ac8cbe0c8a0c29cb7ee" title="Initialises RTC." alt="" coords="151,208,258,235"/>
<area shape="poly" title=" " alt="" coords="65,157,128,194,142,200,140,205,125,198,62,161"/>
<area shape="rect" href="group___porting.html#ga689bf9e8fa9038a9ed256ad33d61b9b9" title="Initialises TMR." alt="" coords="150,259,259,285"/>
<area shape="poly" title=" " alt="" coords="53,158,83,201,104,224,128,245,137,250,134,254,125,249,100,228,79,204,49,161"/>
</map>
</div>

</div>
</div>
<a id="gaf31bec4a4c8ff8b3e466d7b4fa64408d" name="gaf31bec4a4c8ff8b3e466d7b4fa64408d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaf31bec4a4c8ff8b3e466d7b4fa64408d">&#9670;&#160;</a></span>LMA_Deinit()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void LMA_Deinit </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Deinitialises LMA. </p>
<p>Deconstructs the phase linked list so callbacks have no structures to work on. </p><dl class="section warning"><dt>Warning</dt><dd>Does NOT stop drivers operating - call LMA_Stop first if this is the desired behaviour. </dd></dl>

</div>
</div>
<a id="ga6c54cbc1a418aa6b14d3ac9b89820b2f" name="ga6c54cbc1a418aa6b14d3ac9b89820b2f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga6c54cbc1a418aa6b14d3ac9b89820b2f">&#9670;&#160;</a></span>LMA_PhaseRegister()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void LMA_PhaseRegister </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_l_m_a___phase.html">LMA_Phase</a> *const</td>          <td class="paramname"><span class="paramname"><em>p_phase</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Registers a phase to the library. </p>
<p>Do once on power up. This function also initialises the phase, so should be called BEFORE LMA_NeutralRegister LMA_ComputationHookRegister </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">p_phase</td><td>- pointer to the phase </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga7f279a0e6e30f511c1ae98b7a7491ab5" name="ga7f279a0e6e30f511c1ae98b7a7491ab5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga7f279a0e6e30f511c1ae98b7a7491ab5">&#9670;&#160;</a></span>LMA_NeutralRegister()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void LMA_NeutralRegister </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_l_m_a___phase.html">LMA_Phase</a> *const</td>          <td class="paramname"><span class="paramname"><em>p_phase</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_l_m_a___neutral.html">LMA_Neutral</a> *const</td>          <td class="paramname"><span class="paramname"><em>p_neutral</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Registers the systems neutral line to the library (if used) </p>
<dl class="section warning"><dt>Warning</dt><dd>Must be performed AFTER a phase is registered - registering a phase nullifys this. </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">p_phase</td><td>- pointer to the phase structure to link to </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">p_neutral</td><td>- pointer to the neutral structure </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga1edc37f06d0b20a36f8a71ae6cddb9d8" name="ga1edc37f06d0b20a36f8a71ae6cddb9d8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga1edc37f06d0b20a36f8a71ae6cddb9d8">&#9670;&#160;</a></span>LMA_ComputationHookRegister()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void LMA_ComputationHookRegister </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_l_m_a___phase.html">LMA_Phase</a> *const</td>          <td class="paramname"><span class="paramname"><em>p_phase</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float(*</td>          <td class="paramname"><span class="paramname"><em>comp_hook&#160;</em></span>)(float *i, float *v, float *f)&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Registers a hook to be called during parameter computations. </p>
<dl class="section warning"><dt>Warning</dt><dd>Must be performed AFTER a phase is registered - registering a phase nullifys this.</dd></dl>
<p>provides a function which is called after voltage and current are computed. This function can modify the voltage and current and also return a compensation factor which is applied to the computed power values, from which the energy values are derived. This is useful for linearisation and compensation techniques used for accuracy improvements at run time. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">p_phase</td><td>- pointer to the phase structure to link to </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">comp_hook</td><td>- function pointer that should point to a function which accepts two pointers to floats and returns a float. the first argument is a pointer to the computed current, the second to the voltage and the third to the frequency it returns a compensation factor which is multiplied by ALL power values and propogates to the energy values. If no compensation is desired, return 1.00f - if no computation hook is set, no compensation is applied. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga89d1810189c1c5dddff9206e77024b79" name="ga89d1810189c1c5dddff9206e77024b79"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga89d1810189c1c5dddff9206e77024b79">&#9670;&#160;</a></span>LMA_GlobalLoadCalibration()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void LMA_GlobalLoadCalibration </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="struct_l_m_a___global_calibration.html">LMA_GlobalCalibration</a> *const</td>          <td class="paramname"><span class="paramname"><em>p_calib</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Loads calibration data to a system (and config). </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">p_calib</td><td>- pointer to the calibration data to load. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="gad53d8441d05b0ee5b7930963171bc199" name="gad53d8441d05b0ee5b7930963171bc199"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gad53d8441d05b0ee5b7930963171bc199">&#9670;&#160;</a></span>LMA_PhaseLoadCalibration()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void LMA_PhaseLoadCalibration </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_l_m_a___phase.html">LMA_Phase</a> *const</td>          <td class="paramname"><span class="paramname"><em>p_phase</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="struct_l_m_a___phase_calibration.html">LMA_PhaseCalibration</a> *const</td>          <td class="paramname"><span class="paramname"><em>p_calib</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Loads calibration data to a phase. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">p_phase</td><td>- pointer to the phase </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">p_calib</td><td>- pointer to the calibration data to load. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga58095d16c30d20417f8850f9ffc19b9f" name="ga58095d16c30d20417f8850f9ffc19b9f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga58095d16c30d20417f8850f9ffc19b9f">&#9670;&#160;</a></span>LMA_NeutralLoadCalibration()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void LMA_NeutralLoadCalibration </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_l_m_a___neutral.html">LMA_Neutral</a> *const</td>          <td class="paramname"><span class="paramname"><em>p_neutral</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="struct_l_m_a___neutral_calibration.html">LMA_NeutralCalibration</a> *const</td>          <td class="paramname"><span class="paramname"><em>p_calib</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Loads calibration data to a neutral. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">p_neutral</td><td>- pointer to the neutral object. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">p_calib</td><td>- pointer to the calibration data to load. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga04171703dd9ebc3622dbddeead01e116" name="ga04171703dd9ebc3622dbddeead01e116"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga04171703dd9ebc3622dbddeead01e116">&#9670;&#160;</a></span>LMA_Start()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void LMA_Start </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Starts LMA Operation. </p>
<p>Starts the metering state machine and all associated drivers. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group___control_ga04171703dd9ebc3622dbddeead01e116_cgraph.png" border="0" usemap="#agroup___control_ga04171703dd9ebc3622dbddeead01e116_cgraph" loading="lazy" alt=""/></div>
<map name="agroup___control_ga04171703dd9ebc3622dbddeead01e116_cgraph" id="agroup___control_ga04171703dd9ebc3622dbddeead01e116_cgraph">
<area shape="rect" title="Starts LMA Operation." alt="" coords="5,56,89,83"/>
<area shape="rect" href="group___porting.html#ga0ec0a576a1b465cf7aad0ca463fd5bdc" title="Starts the ADC running." alt="" coords="137,5,256,32"/>
<area shape="poly" title=" " alt="" coords="88,53,139,35,141,40,90,58"/>
<area shape="rect" href="group___porting.html#ga4a5c8b4247c9e9199210186bc3c13b17" title="Starts the RTC running." alt="" coords="138,56,255,83"/>
<area shape="poly" title=" " alt="" coords="89,67,122,67,122,72,89,72"/>
<area shape="rect" href="group___porting.html#ga03ee350f945e0f1eb73c0b4d2b92b7d4" title="Starts the TMR running." alt="" coords="137,107,256,133"/>
<area shape="poly" title=" " alt="" coords="90,81,141,99,139,104,88,86"/>
</map>
</div>

</div>
</div>
<a id="ga57e7b7b8d130377ab64560a44237c772" name="ga57e7b7b8d130377ab64560a44237c772"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga57e7b7b8d130377ab64560a44237c772">&#9670;&#160;</a></span>LMA_Stop()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void LMA_Stop </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Stops LMA Operation. </p>
<p>Stops the metering state machine and all associated drivers. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group___control_ga57e7b7b8d130377ab64560a44237c772_cgraph.png" border="0" usemap="#agroup___control_ga57e7b7b8d130377ab64560a44237c772_cgraph" loading="lazy" alt=""/></div>
<map name="agroup___control_ga57e7b7b8d130377ab64560a44237c772_cgraph" id="agroup___control_ga57e7b7b8d130377ab64560a44237c772_cgraph">
<area shape="rect" title="Stops LMA Operation." alt="" coords="5,56,88,83"/>
<area shape="rect" href="group___porting.html#ga4b95531c9a4b3eb7ee25789ede359307" title="Stops the ADC running." alt="" coords="136,5,254,32"/>
<area shape="poly" title=" " alt="" coords="87,53,138,35,140,40,89,58"/>
<area shape="rect" href="group___porting.html#gaf3c87a640362680ec1b8a1e4c4c5a298" title="Stops the RTC running." alt="" coords="137,56,253,83"/>
<area shape="poly" title=" " alt="" coords="88,67,122,67,122,72,88,72"/>
<area shape="rect" href="group___porting.html#ga0ed807aa118c3d1c575540889d42a8fc" title="Stops the TMR running." alt="" coords="136,107,254,133"/>
<area shape="poly" title=" " alt="" coords="89,81,140,99,138,104,87,86"/>
</map>
</div>

</div>
</div>
<a id="ga1cccfc7d6139fc9ae382c71b9e4da524" name="ga1cccfc7d6139fc9ae382c71b9e4da524"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga1cccfc7d6139fc9ae382c71b9e4da524">&#9670;&#160;</a></span>LMA_PhaseCalibrate()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void LMA_PhaseCalibrate </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_l_m_a___phase_calib_args.html">LMA_PhaseCalibArgs</a> *const</td>          <td class="paramname"><span class="paramname"><em>calib_args</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Performs a calibration command according to the flags passed. </p>
<ul>
<li>for calibration of the phase angle error - the result is stored in each phases phase.calib.vi_phase_correction. Because it depends on whether your ADC supports phase correction in hardware, it is left to the programmer to use this parameter as they see fit. <dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">calib_args</td><td>- Arguments and data structure use for a calibration. </td></tr>
  </table>
  </dd>
</dl>
</li>
</ul>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group___control_ga1cccfc7d6139fc9ae382c71b9e4da524_cgraph.png" border="0" usemap="#agroup___control_ga1cccfc7d6139fc9ae382c71b9e4da524_cgraph" loading="lazy" alt=""/></div>
<map name="agroup___control_ga1cccfc7d6139fc9ae382c71b9e4da524_cgraph" id="agroup___control_ga1cccfc7d6139fc9ae382c71b9e4da524_cgraph">
<area shape="rect" title="Performs a calibration command according to the flags passed." alt="" coords="5,81,150,108"/>
<area shape="rect" href="group___porting.html#ga0ec0a576a1b465cf7aad0ca463fd5bdc" title="Starts the ADC running." alt="" coords="198,5,317,32"/>
<area shape="poly" title=" " alt="" coords="110,78,209,36,211,41,112,83"/>
<area shape="rect" href="group___porting.html#ga4b95531c9a4b3eb7ee25789ede359307" title="Stops the ADC running." alt="" coords="198,56,316,83"/>
<area shape="poly" title=" " alt="" coords="149,82,182,77,183,82,150,87"/>
<area shape="rect" href="group___porting.html#ga03ee350f945e0f1eb73c0b4d2b92b7d4" title="Starts the TMR running." alt="" coords="198,107,317,133"/>
<area shape="poly" title=" " alt="" coords="150,102,183,107,182,112,149,107"/>
<area shape="rect" href="group___porting.html#ga0ed807aa118c3d1c575540889d42a8fc" title="Stops the TMR running." alt="" coords="198,157,316,184"/>
<area shape="poly" title=" " alt="" coords="112,106,211,148,209,153,110,111"/>
</map>
</div>

</div>
</div>
<a id="gaf99c92bd7cb9c347b51c1f70650ed14e" name="gaf99c92bd7cb9c347b51c1f70650ed14e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaf99c92bd7cb9c347b51c1f70650ed14e">&#9670;&#160;</a></span>LMA_GlobalCalibrate()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void LMA_GlobalCalibrate </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_l_m_a___global_calib_args.html">LMA_GlobalCalibArgs</a> *const</td>          <td class="paramname"><span class="paramname"><em>calib_args</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Performs a calibration command according to the flags passed. </p>
<ul>
<li>results stored in <a class="el" href="struct_l_m_a___config.html#ab755d86b188bdd802c119af3c15ba529" title="Global calibration data block.">LMA_Config.gcalib</a> </li>
</ul>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group___control_gaf99c92bd7cb9c347b51c1f70650ed14e_cgraph.png" border="0" usemap="#agroup___control_gaf99c92bd7cb9c347b51c1f70650ed14e_cgraph" loading="lazy" alt=""/></div>
<map name="agroup___control_gaf99c92bd7cb9c347b51c1f70650ed14e_cgraph" id="agroup___control_gaf99c92bd7cb9c347b51c1f70650ed14e_cgraph">
<area shape="rect" title="Performs a calibration command according to the flags passed." alt="" coords="5,81,150,108"/>
<area shape="rect" href="group___porting.html#ga0ec0a576a1b465cf7aad0ca463fd5bdc" title="Starts the ADC running." alt="" coords="198,5,317,32"/>
<area shape="poly" title=" " alt="" coords="110,78,209,36,211,41,112,83"/>
<area shape="rect" href="group___porting.html#ga4b95531c9a4b3eb7ee25789ede359307" title="Stops the ADC running." alt="" coords="198,56,316,83"/>
<area shape="poly" title=" " alt="" coords="149,82,182,77,183,82,150,87"/>
<area shape="rect" href="group___porting.html#ga03ee350f945e0f1eb73c0b4d2b92b7d4" title="Starts the TMR running." alt="" coords="198,107,317,133"/>
<area shape="poly" title=" " alt="" coords="150,102,183,107,182,112,149,107"/>
<area shape="rect" href="group___porting.html#ga0ed807aa118c3d1c575540889d42a8fc" title="Stops the TMR running." alt="" coords="198,157,316,184"/>
<area shape="poly" title=" " alt="" coords="112,106,211,148,209,153,110,111"/>
</map>
</div>

</div>
</div>
<a id="ga1bb014412cbe48319a337618b9ef0137" name="ga1bb014412cbe48319a337618b9ef0137"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga1bb014412cbe48319a337618b9ef0137">&#9670;&#160;</a></span>LMA_EnergySet()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void LMA_EnergySet </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_l_m_a___system_energy.html">LMA_SystemEnergy</a> *const</td>          <td class="paramname"><span class="paramname"><em>p_energy</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sets the energy data. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">p_energy</td><td>- pointer to the energy data structure to work on </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="gab00649ab7c0d377cc575ae136fbbadf2" name="gab00649ab7c0d377cc575ae136fbbadf2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gab00649ab7c0d377cc575ae136fbbadf2">&#9670;&#160;</a></span>LMA_EnergyGet()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void LMA_EnergyGet </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_l_m_a___system_energy.html">LMA_SystemEnergy</a> *const</td>          <td class="paramname"><span class="paramname"><em>p_energy</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Gets the energy data. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">p_energy</td><td>- pointer to the energy data structure to work on </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="gac475385e97655bc99bb4fc8306aef078" name="gac475385e97655bc99bb4fc8306aef078"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gac475385e97655bc99bb4fc8306aef078">&#9670;&#160;</a></span>LMA_StatusGet()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group___types.html#gab40ee89230639dd5a514744d23fee390">LMA_Status</a> LMA_StatusGet </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="struct_l_m_a___phase.html">LMA_Phase</a> *const</td>          <td class="paramname"><span class="paramname"><em>p_phase</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Gets copy of the current phase status using critical secrtions. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">p_phase</td><td>- pointer to the phase block on which to get status from. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="group___types.html#gab40ee89230639dd5a514744d23fee390" title="Phase status.">LMA_Status</a> of phase </dd></dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
</div><!-- container -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.14.0 </li>
  </ul>
</div>
</body>
</html>
